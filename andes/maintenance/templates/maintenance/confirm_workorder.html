<!DOCTYPE HTML5>

{% load static %}

<html>
	<head>
		<meta charset=utf-8/>
		<link rel="stylesheet" type="text/css" href="{% static 'maintenance/stylesheet.css' %}" />
	</head>
	<body>
		<form action="{% url 'maintenance:process_workorder' %}" method="post">
			{% csrf_token %}
			<table class="wo-table">
				<colgroup>
					<col class="wo-col-1">
					<col class="wo-col-2">
					<col class="wo-col-3">
					<col class="wo-col-4">
					<col class="wo-col-5">
					<col class="wo-col-6">
				</colgroup>
				<tr>
					<td rowspan=2 class="blank"><img src="{% static 'maintenance/images/andes.png' %}" width=121 height=48></td>
					<td colspan="2" class="blank"><br></td>
					<td class="wo-bg"><b>N° Orden</b></td>
					<td colspan="2" class="center-left">{{ workorder.order_number }}</td>
				</tr>
				<tr>
					<td colspan="5" class="blank"><br></td>
				</tr>
				<tr>
					<th colspan="6" class="blank">Orden de Trabajo</td>
				</tr>
				<tr>
					<td colspan="6" class="blank"><br></td>
				</tr>
				<tr>
					<td class="wo-solid-top wo-solid-left wo-bg">Familia</td>
					<td class="wo-solid-top">{{ workorder.machine_number.family.name }}</td>
					<td class="blank wo-solid-top"><br></td>
					<td class="wo-solid-top wo-bg">Horómetro</td>
					<td class="wo-solid-top">{{ form.hourmeter_to_date }}</td>
					<td class="blank wo-solid-top wo-solid-right"><br></td>
				</tr>
				<tr>
					<td class="wo-solid-left wo-bg">Modelo</td>
					<td>{{ workorder.machine_number.subfamily.name }}</td>
					<td colspan="4" class="blank wo-solid-right"><br></td>
				</tr>
				<tr>
					<td class="wo-solid-left wo-bg">N° Equipo</td>
					<td>{{ workorder.machine_number.machine_number }}</td>
					<td colspan="4" class="blank wo-solid-right"><br></td>
				</tr>
				<tr>
					<td class="wo-solid-left wo-bg">ATO</td>
					<td>{{ airport_code }}</td>
					<td colspan="4" class="blank wo-solid-right"><br></td>
				</tr>
				<tr>
					<td colspan="6" class="blank wo-solid-left wo-solid-right"><br></td>
				</tr>
				<tr>
					<td rowspan="2" class="wo-solid-left wo-bg">Tipo de trabajo<br>(Marcar con una X)</td>
					<td class="wo-bg">Preventivo</td>
					<td class="center">
							{% if workorder.work_type.name == "Preventivo" %}
							<b>X</b>
							{% endif %}
					</td>
					<td class="blank"><br></td>
					<td class="wo-bg">Fecha</td>
					<td class="wo-solid-right wo-bg">Hora</td>
				</tr>
				<tr>
					<td class="wo-bg">Correctivo</td>
					<td class="center">
							{% if workorder.work_type.name == "Correctivo" %}
							<b>X</b>
							{% endif %}
					</td>
					<td class="wo-bg">Ingreso</td>
					<td>{{ workorder.in_datetime|date:"Y-m-d"}}</td>
					<td>{{ workorder.in_datetime|date:"H:i" }}</td>
				</tr>
				<tr>
					<td class="blank wo-solid-left"><br></td>
					<td class="wo-bg">Falla</td>
					<td class="center">
						{% if form.is_falla %}
						<b>X</b>
						{% endif %}
					</td>
					<td class="wo-bg">Salida est</td>
					<td>{{ form.output_date }}</td>
					<td class="wo-solid-right">{{ form.output_time }}</td>
				</tr>
				<tr>
					<td class="blank wo-solid-left"><br></td>
					<td class="wo-bg">Daños</td>
					<td class="center">
						{% if form.is_dannos %}
						<b>X</b>
						{% endif %}
					</td>
					<td colspan="3" class="blank wo-solid-right"><br></td>
				</tr>
				<tr>
					<td class="blank wo-solid-bottom wo-solid-left"><br></td>
					<td class="wo-solid-bottom wo-bg">Modificacion</td>
					<td class="wo-solid-bottom center">
						{% if form.is_modificacion %}
							<b>X</b>
						{% endif %}
					</td>
					<td colspan="3" class="blank wo-solid-right wo-solid-bottom"><br></td>
				</tr>
				<tr>
					<td colspan="6" class="blank"><br></td>
				</tr>
				<tr>
					<td colspan="6" class="blank"><b>Diagnóstico / Intervención.</b></td>
				</tr>
				<tr>
					<td colspan="6" class="wo-solid-top wo-solid-right wo-solid-left wo-bg">Descripción de trabajo / falla</td>
				</tr>
				{% if len_w > 0 %}
					{% for key in work_descriptions %}
					<tr>
						<td colspan="6" class="wo-solid-right wo-solid-left">work_descriptions[key]</td>
					</tr>
					{% endfor %}
				{% else %}
				<tr>
					<td colspan="6" class="wo-solid-right wo-solid-left"><br></td>
				</tr>
				{% endif %}
				<tr>
					<td colspan="6" class="wo-solid-right wo-solid-left wo-bg">Trabajo desarrollado</td>
				</tr>
				<tr>
					<td colspan="6" class="wo-solid-right wo-solid-left">{{ form.developed_work }}</td>
				</tr>
				<tr>
					<td colspan="6" class="wo-solid-right wo-solid-left wo-bg">Trabajo pendiente</td>
				</tr>
				{% if form.pending_job %}
				<tr>
					<td colspan="6" class="wo-solid-right wo-solid-left wo-solid-bottom">{{ form.pending_job }}</td>
				</tr>
				{% else %}
				<tr>
					<td colspan="6" class="wo-solid-right wo-solid-left wo-solid-bottom"><br></td>
				</tr>
				{% endif %}
				<tr>
					<td colspan="6" class="blank"><br></td>
				</tr>
				<tr>
					<td colspan="6" class="blank"><b>Repuestos Empleados.</b></td>
				</tr>
				<tr>
					<td class="wo-solid-top wo-solid-left wo-bg">N° Parte</td>
					<td class="wo-solid-top wo-bg">Descripción</td>
					<td class="wo-solid-top wo-double-right wo-bg">Cantidad</td>
					<td class="wo-solid-top wo-double-left wo-bg">N° Parte</td>
					<td class="wo-solid-top wo-bg">Descripción</td>
					<td class="wo-solid-top wo-solid-right wo-bg">Cantidad</td>
				</tr>
				{% if len_sp > 0}
					{% for i in range_sp %}
					<tr>
						<td class="wo-solid-left">{{ spare_part_numbers['spare_part_number_'|add: i|add: 1] }}</td>
						<td>{{ spare_parts['spare_part_number_' + str(i+1)].spare_part_type }}</td>
						<td class="wo-double-right">{{ spare_part_quantitys['spare_part_quantity_' + str(i+1)] }}</td>
						<td class="wo-double-left">{{ spare_part_numbers['spare_part_number_' + str(len_sp2 + len_spmod2 +i+1)] }}</td>
						<td>{{ spare_parts['spare_part_number_' + str(len_sp2 + len_spmod2 +i+1)].spare_part_type }}</td>
						<td class="wo-soli-right">{{ spare_part_quantitys['spare_part_quantity_' + str(len_sp2 + len_spmod2 +i+1)] }}</td>
					</tr>
					{% endfor %}
					{% if len_sp % 2 == 1 %}
					<tr>
						<td class="wo-solid-left">{{ spare_part_numbers['spare_part_number_' + str(len_sp2 +i+1)] }}</td>
						<td>{{ spare_parts['spare_part_number_' + str(len_sp2 +i+1)].spare_part_type }}</td>
						<td class="wo-double-right">{{ spare_part_quantitys['spare_part_quantity_' + str(len_sp2 +i+1)] }}</td>
						<td class="wo-double-left"><br></td>
						<td><br></td>
						<td class="wo-soli-right"><br></td>
					</tr>
					{% endif %}
				{% else %}
				<tr>
					<td class="wo-solid-left"><br></td>
					<td><br></td>
					<td class="wo-double-right"><br></td>
					<td class="wo-double-left"><br></td>
					<td><br></td>
					<td class="wo-solid-right"><br></td>
				</tr>
				{% endif %}
				<tr>
					<td colspan="6" class="blank wo-solid-top"><br></td>
				</tr>
				<tr>
					<td colspan="6" class="blank"><b>Lubricantes Empleados.</b></td>
				</tr>
				<tr>
					<td class="wo-solid-top wo-solid-left wo-bg">Descripción</td>
					<td class="wo-solid-top wo-solid-right wo-bg">Cantidad</td>
					<td colspan="4" class="blank"><br></td>
				</tr>
				{% if len_i > 0 %}
					{% for i in range_i %}
					<tr>
						<td class="wo-solid-left">input_descriptions['input_description_' + str(i+1)]</td>
						<td class="wo-solid-right">input_quantitys['input_quantity_' + str(i+1)]</td>
						<td colspan="4" class="blank"><br></td>
					</tr>
					{% endfor %}
				{% else %}
				<tr>
					<td class="wo-solid-left"><br></td>
					<td class="wo-solid-right"><br></td>
					<td colspan="4" class="blank"><br></td>
				</tr>
				{% endif %}
				<tr>
					<td colspan="6" class="blank"><br></td>
				</tr>
				<tr>
					<td colspan="6" class="blank"><b>Control de Salida.</b></td>
				</tr>
				<tr>
					<td colspan="2" class="blank wo-solid-top wo-solid-left"><br></td>
					<td class="wo-solid-top wo-bg">Fecha salida</td>
					<td class="wo-solid-top">{{ form.output_date }}</td>
					<td class="wo-solid-top wo-bg">Hora salida</td>
					<td class="wo-solid-top wo-solid-right">{{ form.output_time }}</td>
				</tr>
				<tr>
					<td colspan="6" class="blank wo-solid-right wo-solid-left"><br></td>
				</tr>
				<tr>
					<td class="blank wo-solid-left">Nombre Mecánico</td>
					<td colspan="2" class="blank">{{ user.first_name }} {{ user.last_name }}</td>
					<td class="blank">Firma</td>
					<td colspan="2" class="blank wo-solid-right">_________________________</td>
				</tr>
				<tr>
					<td class="blank wo-solid-bottom wo-solid-left">Nombre Team Leader</td>
					<td colspan="2" class="blank wo-solid-bottom">Carlos Orellana / Esteban Morales</td>
					<td class="blank wo-solid-bottom">Firma</td>
					<td colspan="2" class="blank wo-solid-right wo-solid-bottom">_________________________</td>
				</tr>
			</table>
			<p></p>
			<input type="submit" value="Confirm order">
		</form>
		<script src="{% static 'maintenance/js/jquery-3.1.1.js' %}"></script>
	</body>
</html>
